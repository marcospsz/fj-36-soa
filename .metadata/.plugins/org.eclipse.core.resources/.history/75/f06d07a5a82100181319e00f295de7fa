package br.com.caelum.estoque.ws;

import java.rmi.RemoteException;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import javax.ejb.Stateless;
import javax.jws.WebMethod;
import javax.jws.WebService;

import br.com.caelum.estoque.rmi.EstoqueWS;
import br.com.caelum.estoque.rmi.ItemEstoque;
import br.com.caelum.estoque.rmi.repositorio;

@WebService
@Stateless
public class EstoqueWS {
	
	private	Map<String,	ItemEstoque> repositorio = new	HashMap<>();
	
	public	EstoqueWS()	{
		//populando	alguns	dados,	mapeando	codigo	para	quantidade
		repositorio.put("SOA",	new	ItemEstoque("SOA",	5));
		repositorio.put("TDD",	new	ItemEstoque("TDD",	1));
		repositorio.put("RES",	new	ItemEstoque("RES",	2));
		repositorio.put("LOG",	new	ItemEstoque("LOG",	4));
		repositorio.put("WEB",	new	ItemEstoque("WEB",	1));
		repositorio.put("ARQ",	new	ItemEstoque("ARQ",	2));
	}	
	
	
	public List<ItemEstoque> getItemEstoque(List<String> codigos) {
		
		List<ItemEstoque> itens = new ArrayList<>() ;
		
		if(codigos == null || codigos.isEmpty()){
			
			return itens;
					
		}
		
		for(String codigo : codigos){
			
			if(repositorio.containsKey(codigo)){
				
				itens.add(repositorio.get(codigo));
			}			
		}
		
		return itens ;		
		
}
